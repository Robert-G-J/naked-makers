<head>
<%= render "partials/header" %>

<script src="https://d3js.org/d3.v4.min.js"></script>
<script>
  var locationJSONdata = {
    locations : [
      { name: 'london', count: 3000 },
      { name: 'manchester', count: 500 },
      { name: 'bristol', count: 230 },
      { name: 'Paris', count: 100 }
    ]
  }
</script>
</head>

<body>
<div class="container">
  <div class="jumbotron text-center">
    <h1>Naked Makers</h1>
    <% if flash[:notice] %>
      <div class = 'alert alert-success'><%= flash[:notice]%></div>
    <%end%>
    <div class="text-center">
      <form action = '/responses/new'>
        <input type='submit' value = 'Submit Data' class="btn btn-primary">
      </form>
    </div>
    <h2>the graph</h2>
</div>
</div>


<script>
var locations = locationJSONdata.locations;
var width = 400,
    height = 300;

var canvas = d3.select('body').append('svg')
       .attr('width', width)
       .attr('height', height)
       .append ('g')
           .attr('transform', 'translate(50, 50)');

var pack = d3.pack()
    .size(width, height - 50)
    .padding(10);

 var nodes = d3.hierarchy(locations)
            .sum(function(d) {return
            d.count; });

var node = canvas.selectAll(".node")
          .data(pack(nodes).descendants())
          .enter();
          // .filter(function)(d){
          //     return  !d.locations
          // })
          // .append("g")
          // .attr("class", "node")
          // .attr("transform", function(d) {
          //     return "tra"
          // })

 console.log(nodes);

    //  nodes.data(locations.map(function(location) { return location.count; }), function(d) { return d; })
     //
    //   var node = canvas.selectAll('node')
    //      .data(nodes)
    //      .enter()
    //      .append('g')
    //            .attr('class', 'node')
    //            .attr('transform', 10);
    //      node.append('circle')
    //        .attr('r', 10 )
    //        .attr('fill', 'steelblue')


  // var locations = locationJSONdata.locations;
  // var svg = d3.select("svg");
  //
  // var circle = svg.selectAll("circle")
  //     .data(locations.map(function(location) {
  //       return location.count;
  //     }), function(d) { return d; })
  //     .enter().append("circle")
  //     .attr("cy", 80)
  //     .attr("cx", function(d,i) { return (i+1) * 100 + 30; })
  //     .attr("r", function(d) { return Math.sqrt(d); })
  //     .style("fill", "green")
  //
  // circle.exit().remove();
</script>
</body>
